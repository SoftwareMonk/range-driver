

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Mahone Bay &mdash; Range Driver 0.0.dev1 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.0/dist/embed-amd.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Range Driver
          

          
          </a>

          
            
            
              <div class="version">
                0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Tutorials</a></li>
</ul>
<p class="caption"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../modules/index.html">API Reference</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Range Driver</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Mahone Bay</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/tutorials/MahoneBay2016/dr_factor_study_kadlu.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># HTML output for this notebook can be produced using</span>
<span class="c1"># jupyter nbconvert --to html --no-input notebook_name.ipynb</span>
<span class="c1"># or</span>
<span class="c1"># jupyter nbconvert --to pdf --no-input notebook_name.ipynb</span>
<span class="c1"># edit title and authors in notebook metadata (e.g. jupyter lab / notebook tools / advanced)</span>
</pre></div>
</div>
</div>
<div class="section" id="Mahone-Bay">
<h1>Mahone Bay<a class="headerlink" href="#Mahone-Bay" title="Permalink to this headline">¶</a></h1>
<p>See <a class="reference external" href="../TODO.md">TODO.md</a> for outstanding items.</p>
<p>This notebook contains the same functionality as <code class="docutils literal notranslate"><span class="pre">tidal_analysis_rt.ipynb</span></code>, but with all detail code extracted into the <code class="docutils literal notranslate"><span class="pre">../acoustic_tracking</span></code> package code folder. For this notebook to run properly, ensure: * <code class="docutils literal notranslate"><span class="pre">acoustic_tracking</span></code> is downloaded and installed on your local machine according to the installation instructions * The <code class="docutils literal notranslate"><span class="pre">acoustic_env</span></code> conda environment has been activated</p>
<p>Analysis of acoustic tracking performance using range test data obtained in Mahone Bay near Halifax, NS, by OTN field experiments during March-April 2016.</p>
<p>Range test performance is determined with two methods:</p>
<ol class="arabic simple">
<li><p>by calculating interval lenghts between adjacent detection events,</p></li>
<li><p>by counting the number of detection events within some fixed time interval and normalizing against the expected number of detections.</p></li>
</ol>
<p>Components of this notebook:</p>
<ul class="simple">
<li><p>process tidal data for the time period considering high/low tide times and the observed heights</p></li>
<li><p>determine tidal phase timing</p></li>
<li><p>perform cosine interpolation of heights</p></li>
<li><p>correlate detection performance against tidal phase</p></li>
</ul>
<p><strong>Data:</strong> Beyond tidal data, environmental variables have been collected for 3 hour intervals. Water velocity is used from those variables to determine its potential effect on detection performance.</p>
<p>Summary plots are presented separately for each receiver / transmitter combination at the end of this notebook.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Import packages</span>
<span class="c1"># from acoustic_tracking import *</span>
<span class="kn">import</span> <span class="nn">range_driver</span> <span class="k">as</span> <span class="nn">rd</span>
<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">kadlu</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">scipy.interpolate</span> <span class="kn">import</span> <span class="n">griddata</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">display</span><span class="p">,</span> <span class="n">Markdown</span>
<span class="kn">from</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">import</span> <span class="n">rcParams</span>

<span class="c1"># Setup matplotlib inline plotting</span>
<span class="o">%</span><span class="k">matplotlib</span> inline
<span class="n">rd</span><span class="o">.</span><span class="n">mpl_set_notebook_params</span><span class="p">()</span>

<span class="n">show_details</span> <span class="o">=</span> <span class="kc">False</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">#rd.reload_acoustic()</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">baseconfig</span> <span class="o">=</span> <span class="n">rd</span><span class="o">.</span><span class="n">yload</span><span class="p">(</span><span class="n">rd</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="s2">&quot;configs/base_config.yaml&quot;</span><span class="p">))</span>
<span class="n">viewconfig</span> <span class="o">=</span> <span class="n">rd</span><span class="o">.</span><span class="n">yload</span><span class="p">(</span><span class="n">rd</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="s2">&quot;configs/view_config.yaml&quot;</span><span class="p">))</span>
<span class="n">rd</span><span class="o">.</span><span class="n">deep_update</span><span class="p">(</span><span class="n">baseconfig</span><span class="p">,</span> <span class="n">viewconfig</span><span class="p">)</span>

<span class="n">rawconfig</span> <span class="o">=</span> <span class="n">rd</span><span class="o">.</span><span class="n">yload</span><span class="p">(</span><span class="n">rd</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="s2">&quot;configs/mahone_config.yaml&quot;</span><span class="p">))</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">rd</span><span class="o">.</span><span class="n">merge_dicts</span><span class="p">(</span><span class="n">baseconfig</span><span class="p">,</span> <span class="n">rawconfig</span><span class="p">)</span>
<span class="n">rd</span><span class="o">.</span><span class="n">prepare_config</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">#print(at.ydump(config))</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">kadlu</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">Markdown</span><span class="p">,</span> <span class="n">display</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>

<span class="c1"># mpl.use(&#39;module://ipympl.backend_nbagg&#39;)</span>
<span class="c1">#%matplotlib widget</span>
<span class="o">%</span><span class="k">matplotlib</span> inline
<span class="n">rd</span><span class="o">.</span><span class="n">mpl_set_notebook_params</span><span class="p">()</span>

<span class="n">show_details</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">show_details</span>
</pre></div>
</div>
</div>
<div class="section" id="Read-Raw-Detection-Data-&amp;-Metadata">
<h2>Read Raw Detection Data &amp; Metadata<a class="headerlink" href="#Read-Raw-Detection-Data-&-Metadata" title="Permalink to this headline">¶</a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># rd.reload_acoustic()</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">detection_df</span><span class="p">,</span> <span class="n">mdb</span> <span class="o">=</span> <span class="n">rd</span><span class="o">.</span><span class="n">read_via_config</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">otn_transmitter_patch</span><span class="p">:</span>
    <span class="n">rd</span><span class="o">.</span><span class="n">otn_transmitter_patch_1</span><span class="p">(</span><span class="n">mdb</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">df_dets</span><span class="p">,</span> <span class="n">df_inits</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">rd</span><span class="o">.</span><span class="n">process_intervals</span><span class="p">(</span><span class="n">detection_df</span><span class="p">,</span> <span class="n">mdb</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">detection_df</span><span class="p">,</span> <span class="n">event_bin_split</span> <span class="o">=</span> <span class="n">rd</span><span class="o">.</span><span class="n">detection_rate_grid</span><span class="p">(</span><span class="n">df_dets</span><span class="p">,</span> <span class="n">config</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">time_bin_length</span><span class="p">,</span> <span class="n">mdb</span><span class="p">)</span>
<span class="n">events_df</span><span class="p">,</span> <span class="n">bins_df</span> <span class="o">=</span> <span class="n">rd</span><span class="o">.</span><span class="n">split_by_index</span><span class="p">(</span><span class="n">detection_df</span><span class="p">,</span> <span class="n">event_bin_split</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Group-detection-data-by-(Receiver,-Transmitter)-pairs">
<h2>Group detection data by (Receiver, Transmitter) pairs<a class="headerlink" href="#Group-detection-data-by-(Receiver,-Transmitter)-pairs" title="Permalink to this headline">¶</a></h2>
<p>A name is produced for each pairing that reflects their configuration, such as power level, tag family, distance - as determined by parsing the metadata.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">deploy_lat_lon</span> <span class="o">=</span> <span class="n">mdb</span><span class="o">.</span><span class="n">deploy</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;STATION_NO&#39;</span><span class="p">)[[</span><span class="s1">&#39;DEPLOY_LAT&#39;</span><span class="p">,</span><span class="s1">&#39;DEPLOY_LONG&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">nth</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">mdb</span><span class="o">.</span><span class="n">station_dists_m</span> <span class="o">=</span> <span class="n">rd</span><span class="o">.</span><span class="n">calc_station_dists_m</span><span class="p">(</span><span class="n">deploy_lat_lon</span><span class="p">)</span>

<span class="k">if</span> <span class="s2">&quot;Receiver/Transmitter&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">mdb</span><span class="o">.</span><span class="n">rt_groups</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
    <span class="n">rd</span><span class="o">.</span><span class="n">add_rt_group_info</span><span class="p">(</span><span class="n">events_df</span><span class="p">,</span> <span class="n">mdb</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">show_details</span><span class="p">:</span>
    <span class="n">rd</span><span class="o">.</span><span class="n">report_station_info</span><span class="p">(</span><span class="n">mdb</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">show_dr_plots</span><span class="p">:</span>
    <span class="n">rd</span><span class="o">.</span><span class="n">displaymd</span><span class="p">(</span><span class="s2">&quot;# Detection rate plots for data screening&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">gn</span><span class="p">,</span> <span class="n">tgroup</span> <span class="ow">in</span> <span class="n">bins_df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;Receiver&#39;</span><span class="p">,</span><span class="s1">&#39;Transmitter&#39;</span><span class="p">]):</span>
        <span class="n">rd</span><span class="o">.</span><span class="n">plot_group_dr</span><span class="p">(</span><span class="n">gn</span><span class="p">,</span> <span class="n">tgroup</span><span class="p">,</span> <span class="n">mdb</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="section" id="Detection-rate-plots-for-data-screening">
<h3>Detection rate plots for data screening<a class="headerlink" href="#Detection-rate-plots-for-data-screening" title="Permalink to this headline">¶</a></h3>
</div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="section" id="VMT-1188739/tag-31335-F-H">
<h3>VMT-1188739/tag-31335-F-H<a class="headerlink" href="#VMT-1188739/tag-31335-F-H" title="Permalink to this headline">¶</a></h3>
</div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>tstart</th>
      <th>tend</th>
      <th>count</th>
      <th>min_interval</th>
      <th>max_interval</th>
      <th>Receiver/Transmitter</th>
      <th>dist_m</th>
      <th>Transmitter.Tag Family</th>
      <th>Transmitter.ID</th>
      <th>Transmitter.Power</th>
      <th>Transmitter.Min delay</th>
      <th>Transmitter.Max delay</th>
      <th>Transmitter.Avg delay</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>VMT-1188739</th>
      <th>A69-1601-31335</th>
      <td>2016-03-09 15:59:51</td>
      <td>2016-04-04 20:51:26</td>
      <td>3153</td>
      <td>8.0</td>
      <td>697579.0</td>
      <td>VMT-1188739/tag-31335-F-H</td>
      <td>822.11224</td>
      <td>V16-5x</td>
      <td>31335</td>
      <td>H</td>
      <td>5</td>
      <td>5</td>
      <td>5.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_19_3.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_19_3.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="section" id="VMT-1188739/tag-31339-F-H">
<h3>VMT-1188739/tag-31339-F-H<a class="headerlink" href="#VMT-1188739/tag-31339-F-H" title="Permalink to this headline">¶</a></h3>
</div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>tstart</th>
      <th>tend</th>
      <th>count</th>
      <th>min_interval</th>
      <th>max_interval</th>
      <th>Receiver/Transmitter</th>
      <th>dist_m</th>
      <th>Transmitter.Tag Family</th>
      <th>Transmitter.ID</th>
      <th>Transmitter.Power</th>
      <th>Transmitter.Min delay</th>
      <th>Transmitter.Max delay</th>
      <th>Transmitter.Avg delay</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>VMT-1188739</th>
      <th>A69-1601-31339</th>
      <td>2016-03-17 19:02:43</td>
      <td>2016-04-04 16:48:31</td>
      <td>80</td>
      <td>276.0</td>
      <td>789759.0</td>
      <td>VMT-1188739/tag-31339-F-H</td>
      <td>822.11224</td>
      <td>V13-1x</td>
      <td>31339</td>
      <td>H</td>
      <td>5</td>
      <td>5</td>
      <td>5.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_19_6.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_19_6.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="section" id="VMT-1188739/tag-31340-N-H">
<h3>VMT-1188739/tag-31340-N-H<a class="headerlink" href="#VMT-1188739/tag-31340-N-H" title="Permalink to this headline">¶</a></h3>
</div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>tstart</th>
      <th>tend</th>
      <th>count</th>
      <th>min_interval</th>
      <th>max_interval</th>
      <th>Receiver/Transmitter</th>
      <th>dist_m</th>
      <th>Transmitter.Tag Family</th>
      <th>Transmitter.ID</th>
      <th>Transmitter.Power</th>
      <th>Transmitter.Min delay</th>
      <th>Transmitter.Max delay</th>
      <th>Transmitter.Avg delay</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>VMT-1188739</th>
      <th>A69-1601-31340</th>
      <td>2016-03-09 19:24:44</td>
      <td>2016-04-04 20:51:44</td>
      <td>4379</td>
      <td>263.0</td>
      <td>29890.0</td>
      <td>VMT-1188739/tag-31340-N-H</td>
      <td>520.35822</td>
      <td>V13-1x</td>
      <td>31340</td>
      <td>H</td>
      <td>260</td>
      <td>340</td>
      <td>300.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_19_9.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_19_9.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="section" id="VMT-1188739/tag-31341-N-L">
<h3>VMT-1188739/tag-31341-N-L<a class="headerlink" href="#VMT-1188739/tag-31341-N-L" title="Permalink to this headline">¶</a></h3>
</div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>tstart</th>
      <th>tend</th>
      <th>count</th>
      <th>min_interval</th>
      <th>max_interval</th>
      <th>Receiver/Transmitter</th>
      <th>dist_m</th>
      <th>Transmitter.Tag Family</th>
      <th>Transmitter.ID</th>
      <th>Transmitter.Power</th>
      <th>Transmitter.Min delay</th>
      <th>Transmitter.Max delay</th>
      <th>Transmitter.Avg delay</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>VMT-1188739</th>
      <th>A69-1601-31341</th>
      <td>2016-03-09 16:25:31</td>
      <td>2016-04-03 02:03:14</td>
      <td>98</td>
      <td>8.0</td>
      <td>323765.0</td>
      <td>VMT-1188739/tag-31341-N-L</td>
      <td>520.35822</td>
      <td>V9-2x</td>
      <td>31341</td>
      <td>L</td>
      <td>5</td>
      <td>5</td>
      <td>5.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_19_12.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_19_12.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="section" id="VR2W-100928/tag-31335-F-H">
<h3>VR2W-100928/tag-31335-F-H<a class="headerlink" href="#VR2W-100928/tag-31335-F-H" title="Permalink to this headline">¶</a></h3>
</div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>tstart</th>
      <th>tend</th>
      <th>count</th>
      <th>min_interval</th>
      <th>max_interval</th>
      <th>Receiver/Transmitter</th>
      <th>dist_m</th>
      <th>Transmitter.Tag Family</th>
      <th>Transmitter.ID</th>
      <th>Transmitter.Power</th>
      <th>Transmitter.Min delay</th>
      <th>Transmitter.Max delay</th>
      <th>Transmitter.Avg delay</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>VR2W-100928</th>
      <th>A69-1601-31335</th>
      <td>2016-03-17 14:48:17</td>
      <td>2016-04-04 17:46:12</td>
      <td>5093</td>
      <td>8.0</td>
      <td>8026.0</td>
      <td>VR2W-100928/tag-31335-F-H</td>
      <td>822.11224</td>
      <td>V16-5x</td>
      <td>31335</td>
      <td>H</td>
      <td>5</td>
      <td>5</td>
      <td>5.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_19_15.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_19_15.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="section" id="VR2W-100928/tag-31339-F-H">
<h3>VR2W-100928/tag-31339-F-H<a class="headerlink" href="#VR2W-100928/tag-31339-F-H" title="Permalink to this headline">¶</a></h3>
</div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>tstart</th>
      <th>tend</th>
      <th>count</th>
      <th>min_interval</th>
      <th>max_interval</th>
      <th>Receiver/Transmitter</th>
      <th>dist_m</th>
      <th>Transmitter.Tag Family</th>
      <th>Transmitter.ID</th>
      <th>Transmitter.Power</th>
      <th>Transmitter.Min delay</th>
      <th>Transmitter.Max delay</th>
      <th>Transmitter.Avg delay</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>VR2W-100928</th>
      <th>A69-1601-31339</th>
      <td>2016-03-17 14:49:52</td>
      <td>2016-04-04 17:45:12</td>
      <td>1514</td>
      <td>8.0</td>
      <td>370290.0</td>
      <td>VR2W-100928/tag-31339-F-H</td>
      <td>822.11224</td>
      <td>V13-1x</td>
      <td>31339</td>
      <td>H</td>
      <td>5</td>
      <td>5</td>
      <td>5.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_19_18.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_19_18.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="section" id="VR2W-100928/tag-31340-N-H">
<h3>VR2W-100928/tag-31340-N-H<a class="headerlink" href="#VR2W-100928/tag-31340-N-H" title="Permalink to this headline">¶</a></h3>
</div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>tstart</th>
      <th>tend</th>
      <th>count</th>
      <th>min_interval</th>
      <th>max_interval</th>
      <th>Receiver/Transmitter</th>
      <th>dist_m</th>
      <th>Transmitter.Tag Family</th>
      <th>Transmitter.ID</th>
      <th>Transmitter.Power</th>
      <th>Transmitter.Min delay</th>
      <th>Transmitter.Max delay</th>
      <th>Transmitter.Avg delay</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>VR2W-100928</th>
      <th>A69-1601-31340</th>
      <td>2016-03-09 18:02:47</td>
      <td>2016-04-04 17:52:01</td>
      <td>6754</td>
      <td>263.0</td>
      <td>8438.0</td>
      <td>VR2W-100928/tag-31340-N-H</td>
      <td>520.35822</td>
      <td>V13-1x</td>
      <td>31340</td>
      <td>H</td>
      <td>260</td>
      <td>340</td>
      <td>300.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_19_21.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_19_21.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="section" id="VR2W-100928/tag-31341-N-L">
<h3>VR2W-100928/tag-31341-N-L<a class="headerlink" href="#VR2W-100928/tag-31341-N-L" title="Permalink to this headline">¶</a></h3>
</div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>tstart</th>
      <th>tend</th>
      <th>count</th>
      <th>min_interval</th>
      <th>max_interval</th>
      <th>Receiver/Transmitter</th>
      <th>dist_m</th>
      <th>Transmitter.Tag Family</th>
      <th>Transmitter.ID</th>
      <th>Transmitter.Power</th>
      <th>Transmitter.Min delay</th>
      <th>Transmitter.Max delay</th>
      <th>Transmitter.Avg delay</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>VR2W-100928</th>
      <th>A69-1601-31341</th>
      <td>2016-03-09 13:25:33</td>
      <td>2016-04-04 17:04:53</td>
      <td>5376</td>
      <td>8.0</td>
      <td>20264.0</td>
      <td>VR2W-100928/tag-31341-N-L</td>
      <td>520.35822</td>
      <td>V9-2x</td>
      <td>31341</td>
      <td>L</td>
      <td>5</td>
      <td>5</td>
      <td>5.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_19_24.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_19_24.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="section" id="VR2W-100928/tag-31342-U-L">
<h3>VR2W-100928/tag-31342-U-L<a class="headerlink" href="#VR2W-100928/tag-31342-U-L" title="Permalink to this headline">¶</a></h3>
</div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>tstart</th>
      <th>tend</th>
      <th>count</th>
      <th>min_interval</th>
      <th>max_interval</th>
      <th>Receiver/Transmitter</th>
      <th>dist_m</th>
      <th>Transmitter.Tag Family</th>
      <th>Transmitter.ID</th>
      <th>Transmitter.Power</th>
      <th>Transmitter.Min delay</th>
      <th>Transmitter.Max delay</th>
      <th>Transmitter.Avg delay</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>VR2W-100928</th>
      <th>A69-1601-31342</th>
      <td>2016-03-17 17:48:02</td>
      <td>2016-04-02 16:24:50</td>
      <td>43</td>
      <td>273.0</td>
      <td>423850.0</td>
      <td>VR2W-100928/tag-31342-U-L</td>
      <td>NaN</td>
      <td>V9-2x</td>
      <td>31342</td>
      <td>L</td>
      <td>260</td>
      <td>340</td>
      <td>300.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_19_27.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_19_27.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="section" id="VR2W-128559/tag-31335-F-H">
<h3>VR2W-128559/tag-31335-F-H<a class="headerlink" href="#VR2W-128559/tag-31335-F-H" title="Permalink to this headline">¶</a></h3>
</div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>tstart</th>
      <th>tend</th>
      <th>count</th>
      <th>min_interval</th>
      <th>max_interval</th>
      <th>Receiver/Transmitter</th>
      <th>dist_m</th>
      <th>Transmitter.Tag Family</th>
      <th>Transmitter.ID</th>
      <th>Transmitter.Power</th>
      <th>Transmitter.Min delay</th>
      <th>Transmitter.Max delay</th>
      <th>Transmitter.Avg delay</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>VR2W-128559</th>
      <th>A69-1601-31335</th>
      <td>2016-03-17 14:48:08</td>
      <td>2016-04-04 17:45:36</td>
      <td>5075</td>
      <td>8.0</td>
      <td>9684.0</td>
      <td>VR2W-128559/tag-31335-F-H</td>
      <td>822.11224</td>
      <td>V16-5x</td>
      <td>31335</td>
      <td>H</td>
      <td>5</td>
      <td>5</td>
      <td>5.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_19_30.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_19_30.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="section" id="VR2W-128559/tag-31339-F-H">
<h3>VR2W-128559/tag-31339-F-H<a class="headerlink" href="#VR2W-128559/tag-31339-F-H" title="Permalink to this headline">¶</a></h3>
</div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>tstart</th>
      <th>tend</th>
      <th>count</th>
      <th>min_interval</th>
      <th>max_interval</th>
      <th>Receiver/Transmitter</th>
      <th>dist_m</th>
      <th>Transmitter.Tag Family</th>
      <th>Transmitter.ID</th>
      <th>Transmitter.Power</th>
      <th>Transmitter.Min delay</th>
      <th>Transmitter.Max delay</th>
      <th>Transmitter.Avg delay</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>VR2W-128559</th>
      <th>A69-1601-31339</th>
      <td>2016-03-17 14:53:55</td>
      <td>2016-04-04 17:39:49</td>
      <td>755</td>
      <td>8.0</td>
      <td>521763.0</td>
      <td>VR2W-128559/tag-31339-F-H</td>
      <td>822.11224</td>
      <td>V13-1x</td>
      <td>31339</td>
      <td>H</td>
      <td>5</td>
      <td>5</td>
      <td>5.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_19_33.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_19_33.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="section" id="VR2W-128559/tag-31340-N-H">
<h3>VR2W-128559/tag-31340-N-H<a class="headerlink" href="#VR2W-128559/tag-31340-N-H" title="Permalink to this headline">¶</a></h3>
</div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>tstart</th>
      <th>tend</th>
      <th>count</th>
      <th>min_interval</th>
      <th>max_interval</th>
      <th>Receiver/Transmitter</th>
      <th>dist_m</th>
      <th>Transmitter.Tag Family</th>
      <th>Transmitter.ID</th>
      <th>Transmitter.Power</th>
      <th>Transmitter.Min delay</th>
      <th>Transmitter.Max delay</th>
      <th>Transmitter.Avg delay</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>VR2W-128559</th>
      <th>A69-1601-31340</th>
      <td>2016-03-09 18:02:49</td>
      <td>2016-04-04 17:51:25</td>
      <td>6488</td>
      <td>263.0</td>
      <td>9438.0</td>
      <td>VR2W-128559/tag-31340-N-H</td>
      <td>520.35822</td>
      <td>V13-1x</td>
      <td>31340</td>
      <td>H</td>
      <td>260</td>
      <td>340</td>
      <td>300.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_19_36.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_19_36.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="section" id="VR2W-128559/tag-31341-N-L">
<h3>VR2W-128559/tag-31341-N-L<a class="headerlink" href="#VR2W-128559/tag-31341-N-L" title="Permalink to this headline">¶</a></h3>
</div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>tstart</th>
      <th>tend</th>
      <th>count</th>
      <th>min_interval</th>
      <th>max_interval</th>
      <th>Receiver/Transmitter</th>
      <th>dist_m</th>
      <th>Transmitter.Tag Family</th>
      <th>Transmitter.ID</th>
      <th>Transmitter.Power</th>
      <th>Transmitter.Min delay</th>
      <th>Transmitter.Max delay</th>
      <th>Transmitter.Avg delay</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>VR2W-128559</th>
      <th>A69-1601-31341</th>
      <td>2016-03-09 13:25:35</td>
      <td>2016-04-04 17:45:50</td>
      <td>4061</td>
      <td>8.0</td>
      <td>43082.0</td>
      <td>VR2W-128559/tag-31341-N-L</td>
      <td>520.35822</td>
      <td>V9-2x</td>
      <td>31341</td>
      <td>L</td>
      <td>5</td>
      <td>5</td>
      <td>5.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_19_39.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_19_39.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="section" id="VR2W-128559/tag-31342-U-L">
<h3>VR2W-128559/tag-31342-U-L<a class="headerlink" href="#VR2W-128559/tag-31342-U-L" title="Permalink to this headline">¶</a></h3>
</div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>tstart</th>
      <th>tend</th>
      <th>count</th>
      <th>min_interval</th>
      <th>max_interval</th>
      <th>Receiver/Transmitter</th>
      <th>dist_m</th>
      <th>Transmitter.Tag Family</th>
      <th>Transmitter.ID</th>
      <th>Transmitter.Power</th>
      <th>Transmitter.Min delay</th>
      <th>Transmitter.Max delay</th>
      <th>Transmitter.Avg delay</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>VR2W-128559</th>
      <th>A69-1601-31342</th>
      <td>2016-03-17 16:22:33</td>
      <td>2016-04-02 16:24:17</td>
      <td>5</td>
      <td>1138.0</td>
      <td>1369251.0</td>
      <td>VR2W-128559/tag-31342-U-L</td>
      <td>NaN</td>
      <td>V9-2x</td>
      <td>31342</td>
      <td>L</td>
      <td>260</td>
      <td>340</td>
      <td>300.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_19_42.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_19_42.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="section" id="VR4-UWM-250473/tag-31335-F-H">
<h3>VR4-UWM-250473/tag-31335-F-H<a class="headerlink" href="#VR4-UWM-250473/tag-31335-F-H" title="Permalink to this headline">¶</a></h3>
</div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>tstart</th>
      <th>tend</th>
      <th>count</th>
      <th>min_interval</th>
      <th>max_interval</th>
      <th>Receiver/Transmitter</th>
      <th>dist_m</th>
      <th>Transmitter.Tag Family</th>
      <th>Transmitter.ID</th>
      <th>Transmitter.Power</th>
      <th>Transmitter.Min delay</th>
      <th>Transmitter.Max delay</th>
      <th>Transmitter.Avg delay</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>VR4-UWM-250473</th>
      <th>A69-1601-31335</th>
      <td>2016-03-17 14:48:21</td>
      <td>2016-04-04 17:51:30</td>
      <td>3992</td>
      <td>8.0</td>
      <td>7320.0</td>
      <td>VR4-UWM-250473/tag-31335-F-H</td>
      <td>822.11224</td>
      <td>V16-5x</td>
      <td>31335</td>
      <td>H</td>
      <td>5</td>
      <td>5</td>
      <td>5.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_19_45.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_19_45.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="section" id="VR4-UWM-250473/tag-31339-F-H">
<h3>VR4-UWM-250473/tag-31339-F-H<a class="headerlink" href="#VR4-UWM-250473/tag-31339-F-H" title="Permalink to this headline">¶</a></h3>
</div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>tstart</th>
      <th>tend</th>
      <th>count</th>
      <th>min_interval</th>
      <th>max_interval</th>
      <th>Receiver/Transmitter</th>
      <th>dist_m</th>
      <th>Transmitter.Tag Family</th>
      <th>Transmitter.ID</th>
      <th>Transmitter.Power</th>
      <th>Transmitter.Min delay</th>
      <th>Transmitter.Max delay</th>
      <th>Transmitter.Avg delay</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>VR4-UWM-250473</th>
      <th>A69-1601-31339</th>
      <td>2016-03-17 14:57:49</td>
      <td>2016-04-04 17:40:12</td>
      <td>769</td>
      <td>8.0</td>
      <td>439208.0</td>
      <td>VR4-UWM-250473/tag-31339-F-H</td>
      <td>822.11224</td>
      <td>V13-1x</td>
      <td>31339</td>
      <td>H</td>
      <td>5</td>
      <td>5</td>
      <td>5.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_19_48.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_19_48.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="section" id="VR4-UWM-250473/tag-31340-N-H">
<h3>VR4-UWM-250473/tag-31340-N-H<a class="headerlink" href="#VR4-UWM-250473/tag-31340-N-H" title="Permalink to this headline">¶</a></h3>
</div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>tstart</th>
      <th>tend</th>
      <th>count</th>
      <th>min_interval</th>
      <th>max_interval</th>
      <th>Receiver/Transmitter</th>
      <th>dist_m</th>
      <th>Transmitter.Tag Family</th>
      <th>Transmitter.ID</th>
      <th>Transmitter.Power</th>
      <th>Transmitter.Min delay</th>
      <th>Transmitter.Max delay</th>
      <th>Transmitter.Avg delay</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>VR4-UWM-250473</th>
      <th>A69-1601-31340</th>
      <td>2016-03-09 18:02:48</td>
      <td>2016-04-04 17:51:48</td>
      <td>4275</td>
      <td>263.0</td>
      <td>14553.0</td>
      <td>VR4-UWM-250473/tag-31340-N-H</td>
      <td>520.35822</td>
      <td>V13-1x</td>
      <td>31340</td>
      <td>H</td>
      <td>260</td>
      <td>340</td>
      <td>300.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_19_51.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_19_51.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="section" id="VR4-UWM-250473/tag-31341-N-L">
<h3>VR4-UWM-250473/tag-31341-N-L<a class="headerlink" href="#VR4-UWM-250473/tag-31341-N-L" title="Permalink to this headline">¶</a></h3>
</div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>tstart</th>
      <th>tend</th>
      <th>count</th>
      <th>min_interval</th>
      <th>max_interval</th>
      <th>Receiver/Transmitter</th>
      <th>dist_m</th>
      <th>Transmitter.Tag Family</th>
      <th>Transmitter.ID</th>
      <th>Transmitter.Power</th>
      <th>Transmitter.Min delay</th>
      <th>Transmitter.Max delay</th>
      <th>Transmitter.Avg delay</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>VR4-UWM-250473</th>
      <th>A69-1601-31341</th>
      <td>2016-03-09 13:25:33</td>
      <td>2016-04-04 17:41:01</td>
      <td>2449</td>
      <td>8.0</td>
      <td>43120.0</td>
      <td>VR4-UWM-250473/tag-31341-N-L</td>
      <td>520.35822</td>
      <td>V9-2x</td>
      <td>31341</td>
      <td>L</td>
      <td>5</td>
      <td>5</td>
      <td>5.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_19_54.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_19_54.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="section" id="VR4-UWM-250473/tag-31342-U-L">
<h3>VR4-UWM-250473/tag-31342-U-L<a class="headerlink" href="#VR4-UWM-250473/tag-31342-U-L" title="Permalink to this headline">¶</a></h3>
</div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>tstart</th>
      <th>tend</th>
      <th>count</th>
      <th>min_interval</th>
      <th>max_interval</th>
      <th>Receiver/Transmitter</th>
      <th>dist_m</th>
      <th>Transmitter.Tag Family</th>
      <th>Transmitter.ID</th>
      <th>Transmitter.Power</th>
      <th>Transmitter.Min delay</th>
      <th>Transmitter.Max delay</th>
      <th>Transmitter.Avg delay</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>VR4-UWM-250473</th>
      <th>A69-1601-31342</th>
      <td>2016-03-17 16:23:02</td>
      <td>2016-04-03 15:36:19</td>
      <td>40</td>
      <td>276.0</td>
      <td>412585.0</td>
      <td>VR4-UWM-250473/tag-31342-U-L</td>
      <td>NaN</td>
      <td>V9-2x</td>
      <td>31342</td>
      <td>L</td>
      <td>260</td>
      <td>340</td>
      <td>300.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_19_57.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_19_57.png" />
</div>
</div>
</div>
<div class="section" id="Detection-data-is-merged-with-environmental-variables-from-kadlu">
<h2>Detection data is merged with environmental variables from kadlu<a class="headerlink" href="#Detection-data-is-merged-with-environmental-variables-from-kadlu" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://docs.meridian.cs.dal.ca/kadlu/index.html#">Kadlu</a> is a Python package which provides functionality for fetching and interpolating environmental data related to ocean ambient nose levels. The <code class="docutils literal notranslate"><span class="pre">acoustic_tracking</span></code> package provides users with the option to integrate environmental data from Kadlu with their own detection datasets.</p>
<p>To extract environmental data from kadlu, you will need to specify (1) data sources and (2) bounds. Then, using these specifications you can use the <code class="docutils literal notranslate"><span class="pre">add_kadlu_env_data()</span></code> function to automatically extract and interpolate data using the kadlu Python package.</p>
<div class="section" id="Data-Sources">
<h3>Data Sources<a class="headerlink" href="#Data-Sources" title="Permalink to this headline">¶</a></h3>
<p>A <code class="docutils literal notranslate"><span class="pre">sources</span></code> dictionary is used to specify the variables and data sources you want to retrieve using kadlu. To see a high level overview of available data sources, execute the command below.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">kadlu</span><span class="o">.</span><span class="n">source_map</span><span class="p">)</span>
</pre></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="n">kadlu</span><span class="o">.</span><span class="n">source_map</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

    CHS   (Canadian Hydrography Service)
          bathymetry:       bathymetric data in Canada&#39;s waterways. metres, variable resolution

    ERA5  (Global environmental dataset from Copernicus Climate Data Store)
          wavedir:          mean wave direction, degrees
          waveheight:       combined height of wind, waves, and swell. metres
          waveperiod:       mean wave period, seconds
          wind_uv:          wind speed computed as sqrt(u^2 + v^2) / 2, where u, v are direction vectors
          wind_u:           wind speed coordinate U-vector, m/s
          wind_v:           wind speed coordinate V-vector, m/s

    GEBCO (General Bathymetric Chart of the Oceans)
          bathymetry:       global bathymetric and topographic data. metres below sea level

    HYCOM (Hybrid Coordinate Ocean Model)
          salinity:         g/kg salt in water
          temp:             degrees celsius
          water_uv:         ocean current computed as sqrt(u^2 + v^2) / 2, where u, v are direction vectors
          water_u:          ocean current coordinate U-vector, m/s
          water_v:          ocean current coordinate V-vector, m/s

    WWIII (WaveWatch Ocean Model Gen 3)
          wavedir:          primary wave direction, degrees
          waveheight:       combined height of wind and waves, metres
          waveperiod:       primary mean wave period, seconds
          wind_uv:          wind speed computed as sqrt(u^2 + v^2) / 2, where u, v are direction vectors
          wind_u:           wind speed coordinate U-vector, m/s
          wind_v:           wind speed coordinate V-vector, m/s

</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># List Sources</span>
<span class="n">sources</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">sources</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Data-Boundaries">
<h3>Data Boundaries<a class="headerlink" href="#Data-Boundaries" title="Permalink to this headline">¶</a></h3>
<p>A <code class="docutils literal notranslate"><span class="pre">bounds</span></code> dictionary is used to specify the spatial and temporal boundaries for which you want to retrieve data. A <code class="docutils literal notranslate"><span class="pre">north</span></code>, <code class="docutils literal notranslate"><span class="pre">south</span></code>, <code class="docutils literal notranslate"><span class="pre">east</span></code>, and <code class="docutils literal notranslate"><span class="pre">west</span></code> value are provided to specify geospatial boundaries, while a <code class="docutils literal notranslate"><span class="pre">start</span></code> and <code class="docutils literal notranslate"><span class="pre">end</span></code> are used to specify temporal boundaries. Optionally, <code class="docutils literal notranslate"><span class="pre">top</span></code> and <code class="docutils literal notranslate"><span class="pre">bottom</span></code> values can be used to limit data to specific depths.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Define Bounds</span>
<span class="c1"># Mahone Bay, NS</span>

<span class="n">lat_center</span> <span class="o">=</span> <span class="mf">44.5541333</span>
<span class="n">north_offset</span> <span class="o">=</span> <span class="mf">0.5</span>
<span class="n">south_offset</span> <span class="o">=</span> <span class="mi">2</span>

<span class="n">lon_center</span> <span class="o">=</span> <span class="o">-</span><span class="mf">64.17682</span>
<span class="n">east_offset</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">west_offset</span> <span class="o">=</span> <span class="mi">2</span>

<span class="n">bounds</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2016</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">11</span><span class="p">),</span>
              <span class="n">south</span><span class="o">=</span><span class="n">lat_center</span> <span class="o">-</span> <span class="n">south_offset</span><span class="p">,</span> <span class="n">west</span><span class="o">=</span><span class="n">lon_center</span> <span class="o">-</span> <span class="n">west_offset</span><span class="p">,</span>
              <span class="n">north</span><span class="o">=</span><span class="n">lat_center</span> <span class="o">+</span> <span class="n">north_offset</span><span class="p">,</span> <span class="n">east</span><span class="o">=</span> <span class="n">lon_center</span> <span class="o">+</span> <span class="n">east_offset</span><span class="p">,</span>
              <span class="n">top</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="c1"># OR</span>

<span class="n">bounds</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">bounds</span>

<span class="nb">print</span><span class="p">(</span><span class="n">bounds</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;top&#39;: 0, &#39;bottom&#39;: 0, &#39;description&#39;: &#39;Mahone Bay, NS&#39;, &#39;start&#39;: datetime.datetime(2016, 3, 9, 0, 0), &#39;end&#39;: datetime.datetime(2016, 3, 11, 0, 0), &#39;lat_center&#39;: 44.5541333, &#39;lon_center&#39;: -64.17682, &#39;n_offset&#39;: 0.2, &#39;s_offset&#39;: 1, &#39;e_offset&#39;: 1, &#39;w_offset&#39;: 1, &#39;south&#39;: 43.5541333, &#39;north&#39;: 44.7541333, &#39;west&#39;: -65.17682, &#39;east&#39;: -63.176820000000006}
</pre></div></div>
</div>
<p>Sometimes, it can be helpful to have a map visualization of the boundaries you are setting. Here, you can use the <code class="docutils literal notranslate"><span class="pre">plot_bounds</span></code> function to see the boundaries you have specified. Optionally, you can provide receiver locations and metadata to the <code class="docutils literal notranslate"><span class="pre">plot_bounds</span></code> function as well.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Retrieve receiver information</span>
<span class="n">receiver_info</span> <span class="o">=</span> <span class="n">detection_df</span><span class="p">[[</span><span class="s1">&#39;Receiver.lat&#39;</span><span class="p">,</span> <span class="s1">&#39;Receiver.lon&#39;</span><span class="p">,</span> <span class="s1">&#39;Receiver.ID&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;Receiver&#39;</span><span class="p">,</span> <span class="s1">&#39;Receiver.depth&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">()</span>
<span class="n">receiver_locations_df</span> <span class="o">=</span> <span class="n">detection_df</span><span class="p">[[</span><span class="s1">&#39;Receiver.lat&#39;</span><span class="p">,</span> <span class="s1">&#39;Receiver.lon&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">()</span>
<span class="n">receiver_locations</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">receiver_locations_df</span><span class="p">[</span><span class="s1">&#39;Receiver.lat&#39;</span><span class="p">],</span> <span class="n">receiver_locations_df</span><span class="p">[</span><span class="s1">&#39;Receiver.lon&#39;</span><span class="p">]))</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">node_locs</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">kadlu_result</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">kadlu_result</span><span class="p">[</span><span class="mi">2</span><span class="p">])))</span>
<span class="k">except</span><span class="p">:</span>
    <span class="n">node_locs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Warning: no node locations available. Consider to run this cell again, after the next cell set result approprietly.&quot;</span><span class="p">)</span>

<span class="n">rd</span><span class="o">.</span><span class="n">plot_bounds</span><span class="p">(</span><span class="n">bounds</span><span class="p">,</span> <span class="n">receiver_locations</span><span class="o">=</span><span class="n">receiver_locations</span><span class="p">,</span>
               <span class="n">receiver_info</span><span class="o">=</span><span class="n">receiver_info</span><span class="p">,</span> <span class="n">node_locations</span><span class="o">=</span><span class="n">node_locs</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Warning: no node locations available. Consider to run this cell again, after the next cell set result approprietly.
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"version_major": 2, "version_minor": 0, "model_id": "ebba9a81da004af4a077a90b9a3fb25a"}</script></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"version_major": 2, "version_minor": 0, "model_id": "ebba9a81da004af4a077a90b9a3fb25a"}</script></div>
</div>
</div>
<div class="section" id="Add-Environmental-Variables-from-kadlu">
<h3>Add Environmental Variables from kadlu<a class="headerlink" href="#Add-Environmental-Variables-from-kadlu" title="Permalink to this headline">¶</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">df_detections_env</span><span class="p">,</span> <span class="n">kadlu_result</span> <span class="o">=</span> <span class="n">rd</span><span class="o">.</span><span class="n">add_kadlu_env_data</span><span class="p">(</span><span class="n">bounds</span><span class="p">,</span> <span class="n">sources</span><span class="p">,</span> <span class="n">detection_df</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>## Reading Custom Data</p>
<p>In addition to integrating environmental data from Kadlu, acoustic_tracking allows you to integrate environmental data contained from custom NetCDF files. This allows users to leverage data from custom datasets which aren’t available through Kadlu but might be relevant to the range test of interest.</p>
<p>Here, we will use the <code class="docutils literal notranslate"><span class="pre">add_custom_env_data()</span></code> function to integrate custom environmental data from HYCOM with our detection dataset. This dataset provides finer resolution data for our region of interest than what is available through the Kadlu interface.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Specify axes to interpolate (the axes which specify the points to interpolate)</span>
<span class="n">axes_to_interpolate</span> <span class="o">=</span> <span class="p">[</span><span class="n">df_detections_env</span><span class="p">[</span><span class="s1">&#39;Receiver.lat&#39;</span><span class="p">],</span>
                       <span class="n">df_detections_env</span><span class="p">[</span><span class="s1">&#39;Receiver.lon&#39;</span><span class="p">],</span>
                       <span class="p">[</span><span class="n">d</span><span class="o">.</span><span class="n">timestamp</span><span class="p">()</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">df_detections_env</span><span class="p">[</span><span class="s1">&#39;datetime&#39;</span><span class="p">]],</span>
                       <span class="n">df_detections_env</span><span class="p">[</span><span class="s1">&#39;Receiver.depth&#39;</span><span class="p">]]</span>

<span class="c1"># Specify the variable -&gt; file map. This tells us which data file (net CDF file) contains the data for</span>
<span class="c1"># a specific variable.</span>
<span class="n">file_map</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">file_map</span>

<span class="c1"># Add custom environment data</span>
<span class="n">df_detections_env</span> <span class="o">=</span> <span class="n">rd</span><span class="o">.</span><span class="n">environment</span><span class="o">.</span><span class="n">add_custom_env_data</span><span class="p">(</span><span class="n">axes_to_interpolate</span><span class="p">,</span> <span class="n">file_map</span><span class="p">,</span> <span class="n">df_detections_env</span><span class="p">)</span>

<span class="c1"># Look at the new dataset</span>
<span class="n">df_detections_env</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>datetime</th>
      <th>Receiver</th>
      <th>Transmitter</th>
      <th>Receiver.ID</th>
      <th>Transmitter.ID</th>
      <th>Receiver.lat</th>
      <th>Receiver.lon</th>
      <th>Receiver.bottom_depth</th>
      <th>Receiver.depth</th>
      <th>Transmitter.Tag Family</th>
      <th>...</th>
      <th>wind_v</th>
      <th>salinity_bottom</th>
      <th>salinity</th>
      <th>water_v</th>
      <th>water_v_bottom</th>
      <th>surf_el</th>
      <th>water_temp_bottom</th>
      <th>water_temp</th>
      <th>water_u_bottom</th>
      <th>water_u</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2016-03-09 13:25:33</td>
      <td>VR2W-100928</td>
      <td>A69-1601-31341</td>
      <td>100928</td>
      <td>31341</td>
      <td>44.554133</td>
      <td>-64.17682</td>
      <td>203</td>
      <td>193</td>
      <td>V9-2x</td>
      <td>...</td>
      <td>4.432892</td>
      <td>31.651001</td>
      <td>31.642000</td>
      <td>-0.002</td>
      <td>0.002</td>
      <td>-0.605</td>
      <td>2.403999</td>
      <td>2.434999</td>
      <td>-0.003</td>
      <td>0.002</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2016-03-09 13:25:41</td>
      <td>VR2W-100928</td>
      <td>A69-1601-31341</td>
      <td>100928</td>
      <td>31341</td>
      <td>44.554133</td>
      <td>-64.17682</td>
      <td>203</td>
      <td>193</td>
      <td>V9-2x</td>
      <td>...</td>
      <td>4.432892</td>
      <td>31.651001</td>
      <td>31.642000</td>
      <td>-0.002</td>
      <td>0.002</td>
      <td>-0.605</td>
      <td>2.403999</td>
      <td>2.434999</td>
      <td>-0.003</td>
      <td>0.002</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2016-03-09 13:25:49</td>
      <td>VR2W-100928</td>
      <td>A69-1601-31341</td>
      <td>100928</td>
      <td>31341</td>
      <td>44.554133</td>
      <td>-64.17682</td>
      <td>203</td>
      <td>193</td>
      <td>V9-2x</td>
      <td>...</td>
      <td>4.432892</td>
      <td>31.651001</td>
      <td>31.642000</td>
      <td>-0.002</td>
      <td>0.002</td>
      <td>-0.605</td>
      <td>2.403999</td>
      <td>2.434999</td>
      <td>-0.003</td>
      <td>0.002</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2016-03-09 13:25:57</td>
      <td>VR2W-100928</td>
      <td>A69-1601-31341</td>
      <td>100928</td>
      <td>31341</td>
      <td>44.554133</td>
      <td>-64.17682</td>
      <td>203</td>
      <td>193</td>
      <td>V9-2x</td>
      <td>...</td>
      <td>4.432892</td>
      <td>31.651001</td>
      <td>31.642000</td>
      <td>-0.002</td>
      <td>0.002</td>
      <td>-0.605</td>
      <td>2.403999</td>
      <td>2.434999</td>
      <td>-0.003</td>
      <td>0.002</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2016-03-09 13:26:06</td>
      <td>VR2W-100928</td>
      <td>A69-1601-31341</td>
      <td>100928</td>
      <td>31341</td>
      <td>44.554133</td>
      <td>-64.17682</td>
      <td>203</td>
      <td>193</td>
      <td>V9-2x</td>
      <td>...</td>
      <td>4.432892</td>
      <td>31.651001</td>
      <td>31.642000</td>
      <td>-0.002</td>
      <td>0.002</td>
      <td>-0.605</td>
      <td>2.403999</td>
      <td>2.434999</td>
      <td>-0.003</td>
      <td>0.002</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>64219</th>
      <td>2016-04-03 11:00:00</td>
      <td>VR4-UWM-250473</td>
      <td>A69-1601-31342</td>
      <td>250473</td>
      <td>31342</td>
      <td>44.554133</td>
      <td>-64.17682</td>
      <td>203</td>
      <td>183</td>
      <td>V9-2x</td>
      <td>...</td>
      <td>-2.193771</td>
      <td>31.759001</td>
      <td>31.685001</td>
      <td>-0.021</td>
      <td>0.009</td>
      <td>-0.686</td>
      <td>3.393999</td>
      <td>3.789999</td>
      <td>-0.001</td>
      <td>0.007</td>
    </tr>
    <tr>
      <th>64220</th>
      <td>2016-04-03 12:00:00</td>
      <td>VR4-UWM-250473</td>
      <td>A69-1601-31342</td>
      <td>250473</td>
      <td>31342</td>
      <td>44.554133</td>
      <td>-64.17682</td>
      <td>203</td>
      <td>183</td>
      <td>V9-2x</td>
      <td>...</td>
      <td>-2.193771</td>
      <td>31.759001</td>
      <td>31.685001</td>
      <td>-0.021</td>
      <td>0.009</td>
      <td>-0.686</td>
      <td>3.393999</td>
      <td>3.789999</td>
      <td>-0.001</td>
      <td>0.007</td>
    </tr>
    <tr>
      <th>64221</th>
      <td>2016-04-03 13:00:00</td>
      <td>VR4-UWM-250473</td>
      <td>A69-1601-31342</td>
      <td>250473</td>
      <td>31342</td>
      <td>44.554133</td>
      <td>-64.17682</td>
      <td>203</td>
      <td>183</td>
      <td>V9-2x</td>
      <td>...</td>
      <td>-2.193771</td>
      <td>31.759001</td>
      <td>31.685001</td>
      <td>-0.021</td>
      <td>0.009</td>
      <td>-0.686</td>
      <td>3.393999</td>
      <td>3.789999</td>
      <td>-0.001</td>
      <td>0.007</td>
    </tr>
    <tr>
      <th>64222</th>
      <td>2016-04-03 14:00:00</td>
      <td>VR4-UWM-250473</td>
      <td>A69-1601-31342</td>
      <td>250473</td>
      <td>31342</td>
      <td>44.554133</td>
      <td>-64.17682</td>
      <td>203</td>
      <td>183</td>
      <td>V9-2x</td>
      <td>...</td>
      <td>-2.193771</td>
      <td>31.761002</td>
      <td>31.684002</td>
      <td>-0.024</td>
      <td>0.008</td>
      <td>-0.609</td>
      <td>3.387999</td>
      <td>3.977999</td>
      <td>-0.001</td>
      <td>0.007</td>
    </tr>
    <tr>
      <th>64223</th>
      <td>2016-04-03 15:00:00</td>
      <td>VR4-UWM-250473</td>
      <td>A69-1601-31342</td>
      <td>250473</td>
      <td>31342</td>
      <td>44.554133</td>
      <td>-64.17682</td>
      <td>203</td>
      <td>183</td>
      <td>V9-2x</td>
      <td>...</td>
      <td>-2.193771</td>
      <td>31.761002</td>
      <td>31.684002</td>
      <td>-0.024</td>
      <td>0.008</td>
      <td>-0.609</td>
      <td>3.387999</td>
      <td>3.977999</td>
      <td>-0.001</td>
      <td>0.007</td>
    </tr>
  </tbody>
</table>
<p>64224 rows × 33 columns</p>
</div></div>
</div>
</div>
<div class="section" id="Add-tidal-information">
<h3>Add tidal information<a class="headerlink" href="#Add-tidal-information" title="Permalink to this headline">¶</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">if</span> <span class="s1">&#39;tidal&#39;</span> <span class="ow">in</span> <span class="n">config</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
    <span class="n">df_tidal_times</span> <span class="o">=</span> <span class="n">rd</span><span class="o">.</span><span class="n">read_ods</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">tidal</span><span class="o">.</span><span class="n">tidal_times_ods</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">df_tidal_flat</span> <span class="o">=</span> <span class="n">rd</span><span class="o">.</span><span class="n">flatten_tidal_table</span><span class="p">(</span><span class="n">df_tidal_times</span><span class="p">,</span> <span class="n">year</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">tidal</span><span class="o">.</span><span class="n">year</span><span class="p">)</span>
    <span class="n">df_tidal_interp</span> <span class="o">=</span> <span class="n">rd</span><span class="o">.</span><span class="n">tidal_phase</span><span class="p">(</span><span class="n">df_tidal_flat</span><span class="p">,</span> <span class="n">new_times</span> <span class="o">=</span> <span class="n">df_detections_env</span><span class="o">.</span><span class="n">datetime</span><span class="p">)</span>
    <span class="n">df_detections_env</span> <span class="o">=</span> <span class="n">df_detections_env</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span>
        <span class="n">df_tidal_interp</span><span class="p">[[</span><span class="s2">&quot;t2&quot;</span><span class="p">,</span><span class="s2">&quot;height&quot;</span><span class="p">,</span><span class="s2">&quot;dheight_cm_per_hr&quot;</span><span class="p">]],</span>
        <span class="n">how</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">,</span>
        <span class="n">left_on</span><span class="o">=</span><span class="s2">&quot;datetime&quot;</span><span class="p">,</span> <span class="n">right_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">&quot;index&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">tidal</span><span class="p">:</span>
        <span class="n">rd</span><span class="o">.</span><span class="n">displaymd</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;# Determine tidal heights via interpolation of tidal time tables</span>
<span class="s2">In addition to ocean and weather model data, historic tidal tables are available and used here to provide</span>
<span class="s2">additional information about environmental cycles that could be factors of influence on the acoustic data.</span>
<span class="s2">&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="n">rd</span><span class="o">.</span><span class="n">show_tidal_plots</span><span class="p">(</span><span class="n">df_tidal_flat</span><span class="p">,</span> <span class="n">df_tidal_interp</span><span class="p">,</span>
                            <span class="o">**</span><span class="n">rd</span><span class="o">.</span><span class="n">select_keys</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">tidal</span><span class="p">,</span>
                                             <span class="p">[</span><span class="s1">&#39;tidal_times_output_csv&#39;</span><span class="p">,</span> <span class="s1">&#39;tidal_interpolation_output_csv&#39;</span><span class="p">]))</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Add-further-calculated-columns-and-prepare-for-event/bin-row-split">
<h3>Add further calculated columns and prepare for event/bin row split<a class="headerlink" href="#Add-further-calculated-columns-and-prepare-for-event/bin-row-split" title="Permalink to this headline">¶</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">for</span> <span class="n">colname</span> <span class="ow">in</span> <span class="n">config</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">calculated_columns</span><span class="p">:</span>
    <span class="n">rd</span><span class="o">.</span><span class="n">make_column</span><span class="p">(</span><span class="n">df_detections_env</span><span class="p">,</span> <span class="n">column_name</span><span class="o">=</span><span class="n">colname</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">event_bin_dfs</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">df</span><span class="p">:</span> <span class="n">rd</span><span class="o">.</span><span class="n">split_by_index</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">event_bin_split</span><span class="p">)</span>
<span class="n">detection_events_df</span><span class="p">,</span> <span class="n">detection_bins_df</span> <span class="o">=</span> <span class="n">event_bin_dfs</span><span class="p">(</span><span class="n">df_detections_env</span><span class="p">)</span>
<span class="n">rt_group_data</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">df_detections_env</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;Receiver&#39;</span><span class="p">,</span><span class="s1">&#39;Transmitter&#39;</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">columns</span><span class="p">,</span> <span class="n">colnames</span><span class="p">,</span> <span class="n">column</span> <span class="o">=</span> <span class="n">rd</span><span class="o">.</span><span class="n">get_column_info</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>

<span class="n">rd</span><span class="o">.</span><span class="n">displaymd</span><span class="p">(</span><span class="s2">&quot;# Plots of detection density and interval lengths &lt;br/&gt; against tidal phase (t2) and </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">colnames</span><span class="p">[</span><span class="n">column</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="section" id="Plots-of-detection-density-and-interval-lengths--against-tidal-phase-(t2)-and-water-velocity">
<h4>Plots of detection density and interval lengths  against tidal phase (t2) and water velocity<a class="headerlink" href="#Plots-of-detection-density-and-interval-lengths--against-tidal-phase-(t2)-and-water-velocity" title="Permalink to this headline">¶</a></h4>
</div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">rd</span><span class="o">.</span><span class="n">rcParams</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">rcParams</span><span class="p">)</span>
<span class="n">params</span> <span class="o">=</span> <span class="n">rd</span><span class="o">.</span><span class="n">make_params</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>

<span class="c1"># column is defined above from config</span>
<span class="n">column_name</span> <span class="o">=</span> <span class="p">(</span><span class="n">column</span><span class="p">,</span> <span class="n">colnames</span><span class="p">[</span><span class="n">column</span><span class="p">])</span>
<span class="n">skipmsg</span> <span class="o">=</span> <span class="kc">False</span>

<span class="c1"># each group contains all detections for a particular receiver/transmitter combination</span>
<span class="k">for</span> <span class="n">gn</span><span class="p">,</span> <span class="n">gr</span> <span class="ow">in</span> <span class="n">rt_group_data</span><span class="p">:</span>
    <span class="n">rt_name</span> <span class="o">=</span> <span class="n">mdb</span><span class="o">.</span><span class="n">rt_groups</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">gn</span><span class="p">,</span> <span class="s1">&#39;Receiver/Transmitter&#39;</span><span class="p">]</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">gr</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">params</span><span class="o">.</span><span class="n">min_detections</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">skipmsg</span><span class="p">:</span>
            <span class="n">rd</span><span class="o">.</span><span class="n">displaymd</span><span class="p">(</span><span class="s2">&quot;**Skipping receiver/transmitter combinations that have insufficient detections:**&quot;</span><span class="p">)</span>
            <span class="n">skipmsg</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">rd</span><span class="o">.</span><span class="n">displaymd</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">rt_name</span><span class="p">))</span>
        <span class="k">continue</span>

    <span class="n">events_df</span><span class="p">,</span> <span class="n">bins_df</span> <span class="o">=</span> <span class="n">event_bin_dfs</span><span class="p">(</span><span class="n">gr</span><span class="p">)</span>

    <span class="n">tdfok</span> <span class="o">=</span> <span class="n">bins_df</span>
    <span class="k">if</span> <span class="n">tdfok</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
        <span class="n">rd</span><span class="o">.</span><span class="n">displaymd</span><span class="p">(</span><span class="s2">&quot;Skipping &quot;</span><span class="p">)</span>
        <span class="n">rd</span><span class="o">.</span><span class="n">displaymd</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">rt_name</span><span class="p">))</span>
        <span class="k">continue</span>
    <span class="n">rd</span><span class="o">.</span><span class="n">process_detections</span><span class="p">(</span><span class="n">events_df</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>

    <span class="k">if</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">rd</span><span class="o">.</span><span class="n">plot_with_dr</span><span class="p">(</span><span class="n">tdfok</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">column_name</span><span class="o">=</span><span class="n">column_name</span><span class="p">,</span> <span class="n">rt_name</span><span class="o">=</span><span class="n">rt_name</span><span class="p">)</span>

    <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="n">rt_name</span><span class="p">)</span>

    <span class="n">rd</span><span class="o">.</span><span class="n">plot_tidal_phase</span><span class="p">(</span><span class="n">tdfok</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

    <span class="n">rd</span><span class="o">.</span><span class="n">plot_with_detection_count</span><span class="p">(</span><span class="n">params</span><span class="o">.</span><span class="n">out</span><span class="o">.</span><span class="n">tdfcount</span><span class="p">,</span> <span class="n">params</span><span class="o">.</span><span class="n">out</span><span class="o">.</span><span class="n">tdfmean</span><span class="p">,</span>
                              <span class="n">params</span><span class="p">,</span> <span class="n">column_name</span><span class="o">=</span><span class="n">column_name</span><span class="p">,</span>
                              <span class="n">ax</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>    <span class="c1"># interval lengths over date range</span>
    <span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
        <span class="c1"># comparison in single plot</span>
        <span class="c1">#broken: at.plot_with_detection_interval(tdfok, params, column_name=column_name, ax=axs[1])</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">out</span><span class="o">.</span><span class="n">tdfmean</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="s2">&quot;t2&quot;</span><span class="p">,</span><span class="s2">&quot;interval&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">c</span><span class="o">=</span><span class="s2">&quot;darkgrey&quot;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">elif</span> <span class="kc">False</span><span class="p">:</span>
        <span class="c1"># old plot type focussing on interval lengths rather than DR</span>
        <span class="n">rd</span><span class="o">.</span><span class="n">plot_with_detection_interval_and_rate</span><span class="p">(</span><span class="n">events_df</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">column_name</span><span class="o">=</span><span class="n">column_name</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># stacked plot for comparison of quantities</span>
        <span class="n">rd</span><span class="o">.</span><span class="n">plot_stack_with_dr</span><span class="p">(</span><span class="n">tdfok</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">column_name</span><span class="o">=</span><span class="n">column_name</span><span class="p">,</span> <span class="n">mainax</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

    <span class="n">rd</span><span class="o">.</span><span class="n">plot_per_detection_rate</span><span class="p">(</span><span class="n">bins_df</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">column_name</span><span class="o">=</span><span class="n">column_name</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
    <span class="c1">#at.plot_per_detection_density(events_df, params, column_name=column_name, ax=axs[2])</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">wspace</span><span class="o">=.</span><span class="mi">3</span><span class="p">)</span>

</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_0.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_0.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_1.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_1.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_2.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_2.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_3.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_3.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_4.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_4.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_5.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_5.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_6.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_6.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_7.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_7.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_8.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_8.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_9.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_9.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_10.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_10.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_11.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_11.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_12.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_12.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_13.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_13.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_14.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_14.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_15.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_15.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_16.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_16.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_17.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_17.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_18.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_18.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_19.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_19.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_20.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_20.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_21.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_21.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_22.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_22.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_23.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_23.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_24.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_24.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_25.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_25.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_26.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_26.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_27.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_27.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_28.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_28.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_29.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_29.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_30.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_30.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_31.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_31.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_32.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_32.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_33.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_33.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_34.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_34.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_35.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_35.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_36.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_36.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_37.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_38_37.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">range_driver.plotting</span> <span class="kn">import</span> <span class="n">heatmaps</span>

<span class="c1">#det_df = detection_events_df</span>
<span class="n">det_df</span> <span class="o">=</span> <span class="n">detection_bins_df</span>

<span class="n">features</span> <span class="o">=</span> <span class="n">det_df</span><span class="p">[[</span><span class="s1">&#39;wavedir&#39;</span><span class="p">,</span> <span class="s1">&#39;waveheight&#39;</span><span class="p">,</span> <span class="s1">&#39;waveperiod&#39;</span><span class="p">,</span> <span class="s1">&#39;salinity_bottom&#39;</span><span class="p">,</span> <span class="s1">&#39;salinity&#39;</span><span class="p">,</span>
                  <span class="s1">&#39;water_v&#39;</span><span class="p">,</span> <span class="s1">&#39;water_v_bottom&#39;</span><span class="p">,</span> <span class="s1">&#39;surf_el&#39;</span><span class="p">,</span> <span class="s1">&#39;water_temp_bottom&#39;</span><span class="p">,</span> <span class="s1">&#39;water_temp&#39;</span><span class="p">,</span>
                  <span class="s1">&#39;water_u_bottom&#39;</span><span class="p">,</span> <span class="s1">&#39;water_u&#39;</span><span class="p">,</span> <span class="s1">&#39;t2&#39;</span><span class="p">,</span> <span class="s1">&#39;height&#39;</span><span class="p">,</span> <span class="s1">&#39;dheight_cm_per_hr&#39;</span><span class="p">,</span> <span class="s1">&#39;interval&#39;</span><span class="p">,</span>
                  <span class="s1">&#39;water_vel&#39;</span><span class="p">,</span> <span class="s1">&#39;detection_rate&#39;</span><span class="p">]]</span>

<span class="n">heatmaps</span><span class="o">.</span><span class="n">plot_feature_heatmap</span><span class="p">(</span><span class="n">features</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;spearman&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_39_0.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_39_0.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_39_1.png" src="../../_images/tutorials_MahoneBay2016_dr_factor_study_kadlu_39_1.png" />
</div>
</div>
</div>
</div>
<div class="section" id="Discussion">
<h2>Discussion<a class="headerlink" href="#Discussion" title="Permalink to this headline">¶</a></h2>
<p>In the above visual summary, the <strong>H-N</strong> combinations, i.e. high-power, near distance, are the ones where water velocity shows the least effect on variations in detection rate. This confirms expectations and shows promise for the proposed study method. Next steps include:</p>
<ul class="simple">
<li><p>Continue to work with detection rate (DR) as calculated in a fixed grid of time windows</p></li>
<li><p>Compare variations of DR with respect to other environmental variables</p></li>
<li><p>Import other environmental variables automatically via data source APIs (ERDDAP, kadlu.fetch)</p></li>
<li><p>Compare different scenarios of factor importance depending on environmental setting of the study</p></li>
</ul>
</div>
<div class="section" id="Acknowledgements">
<h2>Acknowledgements<a class="headerlink" href="#Acknowledgements" title="Permalink to this headline">¶</a></h2>
<p>The above analysis was performed using <a class="reference external" href="http://members.devel.oceantrack.org/erddap/tabledap/otnunit_aat_detections.html">data from OTN</a> (provided by Jonathan Pye of OTN), in combination with HYCOM environmental data and tidal data provided by Casey Hilliard (Meridian/Dal), with a synthesized dataset prepared by Matthew Berkowitz (SFU), with project definition and guidance provided by Oliver Kirsebom (Dal) and Ines Hessler (Dal) as part of the <a class="reference external" href="https://meridian.cs.dal.ca">Meridian Network</a>.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>
</pre></div>
</div>
</div>
<script type="application/vnd.jupyter.widget-state+json">
{"state": {"e568ac7e9f0b46c4ab0b6b57ccfce68b": {"model_name": "LeafletMapStyleModel", "model_module": "jupyter-leaflet", "model_module_version": "^0.13.5", "state": {"_model_module": "jupyter-leaflet", "_model_module_version": "^0.13.5", "_model_name": "LeafletMapStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "StyleView", "cursor": "grab"}}, "d9aceca9326e4688aa8bee855d218ae4": {"model_name": "LeafletMapStyleModel", "model_module": "jupyter-leaflet", "model_module_version": "^0.13.5", "state": {"_model_module": "jupyter-leaflet", "_model_module_version": "^0.13.5", "_model_name": "LeafletMapStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "StyleView", "cursor": "move"}}, "a042986f48f14efba28e8154ce23c13a": {"model_name": "LeafletTileLayerModel", "model_module": "jupyter-leaflet", "model_module_version": "^0.13.5", "state": {"_model_module": "jupyter-leaflet", "_model_module_version": "^0.13.5", "_model_name": "LeafletTileLayerModel", "_view_count": null, "_view_module": "jupyter-leaflet", "_view_module_version": "^0.13.5", "_view_name": "LeafletTileLayerView", "attribution": "Map data (c) <a href=\"https://openstreetmap.org\">OpenStreetMap</a> contributors", "base": true, "bottom": true, "detect_retina": false, "loading": false, "max_native_zoom": 18, "max_zoom": 19, "min_native_zoom": 0, "min_zoom": 1, "name": "", "no_wrap": false, "opacity": 1.0, "options": ["attribution", "detect_retina", "max_native_zoom", "max_zoom", "min_native_zoom", "min_zoom", "no_wrap", "tile_size", "tms"], "popup": null, "popup_max_height": null, "popup_max_width": 300, "popup_min_width": 50, "show_loading": false, "tile_size": 256, "tms": false, "url": "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", "visible": true}}, "9fa14951bb9e4563ada9b3439d914794": {"model_name": "LayoutModel", "model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "cc6da7af5233442fa86c9d1d62e1df1f": {"model_name": "LeafletMapStyleModel", "model_module": "jupyter-leaflet", "model_module_version": "^0.13.5", "state": {"_model_module": "jupyter-leaflet", "_model_module_version": "^0.13.5", "_model_name": "LeafletMapStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "StyleView", "cursor": "grab"}}, "ebba9a81da004af4a077a90b9a3fb25a": {"model_name": "LeafletMapModel", "model_module": "jupyter-leaflet", "model_module_version": "^0.13.5", "state": {"_dom_classes": [], "_model_module": "jupyter-leaflet", "_model_module_version": "^0.13.5", "_model_name": "LeafletMapModel", "_view_count": null, "_view_module": "jupyter-leaflet", "_view_module_version": "^0.13.5", "_view_name": "LeafletMapView", "bottom": 0.0, "bounce_at_zoom_limits": true, "box_zoom": true, "center": [44.1541333, -64.17682], "close_popup_on_click": true, "controls": ["IPY_MODEL_e390ec6bed1f4a73a035416c458edad2", "IPY_MODEL_cc3cedb30d1d4a28bfaccb1bbe0f54c2"], "crs": {"name": "EPSG3857", "custom": false}, "default_style": "IPY_MODEL_e568ac7e9f0b46c4ab0b6b57ccfce68b", "double_click_zoom": true, "dragging": true, "dragging_style": "IPY_MODEL_d9aceca9326e4688aa8bee855d218ae4", "east": 0.0, "fullscreen": false, "inertia": true, "inertia_deceleration": 3000, "inertia_max_speed": 1500, "interpolation": "bilinear", "keyboard": true, "keyboard_pan_offset": 80, "keyboard_zoom_offset": 1, "layers": ["IPY_MODEL_a042986f48f14efba28e8154ce23c13a", "IPY_MODEL_b819517ce9504325b46f2c2ff4f03639", "IPY_MODEL_c280d0759a7442e29ba0553337196c4d", "IPY_MODEL_09ceef0551194c4fa653cd4b09d96f82"], "layout": "IPY_MODEL_9fa14951bb9e4563ada9b3439d914794", "left": 9007199254740991.0, "max_zoom": 18.0, "min_zoom": 1.0, "modisdate": "yesterday", "north": 0.0, "options": ["bounce_at_zoom_limits", "box_zoom", "center", "close_popup_on_click", "double_click_zoom", "dragging", "fullscreen", "inertia", "inertia_deceleration", "inertia_max_speed", "interpolation", "keyboard", "keyboard_pan_offset", "keyboard_zoom_offset", "max_zoom", "min_zoom", "scroll_wheel_zoom", "tap", "tap_tolerance", "touch_zoom", "world_copy_jump", "zoom", "zoom_animation_threshold", "zoom_delta", "zoom_snap", "zoom_start"], "right": 0.0, "scroll_wheel_zoom": false, "south": 0.0, "style": "IPY_MODEL_cc6da7af5233442fa86c9d1d62e1df1f", "tap": true, "tap_tolerance": 15, "top": 9007199254740991.0, "touch_zoom": true, "west": 0.0, "window_url": "", "world_copy_jump": false, "zoom": 8.0, "zoom_animation_threshold": 4, "zoom_delta": 1.0, "zoom_snap": 1.0, "zoom_start": 12.0}}, "e390ec6bed1f4a73a035416c458edad2": {"model_name": "LeafletZoomControlModel", "model_module": "jupyter-leaflet", "model_module_version": "^0.13.5", "state": {"_model_module": "jupyter-leaflet", "_model_module_version": "^0.13.5", "_model_name": "LeafletZoomControlModel", "_view_count": null, "_view_module": "jupyter-leaflet", "_view_module_version": "^0.13.5", "_view_name": "LeafletZoomControlView", "options": ["position", "zoom_in_text", "zoom_in_title", "zoom_out_text", "zoom_out_title"], "position": "topleft", "zoom_in_text": "+", "zoom_in_title": "Zoom in", "zoom_out_text": "-", "zoom_out_title": "Zoom out"}}, "cc3cedb30d1d4a28bfaccb1bbe0f54c2": {"model_name": "LeafletAttributionControlModel", "model_module": "jupyter-leaflet", "model_module_version": "^0.13.5", "state": {"_model_module": "jupyter-leaflet", "_model_module_version": "^0.13.5", "_model_name": "LeafletAttributionControlModel", "_view_count": null, "_view_module": "jupyter-leaflet", "_view_module_version": "^0.13.5", "_view_name": "LeafletAttributionControlView", "options": ["position", "prefix"], "position": "bottomright", "prefix": "ipyleaflet"}}, "b819517ce9504325b46f2c2ff4f03639": {"model_name": "LeafletRectangleModel", "model_module": "jupyter-leaflet", "model_module_version": "^0.13.5", "state": {"_model_module": "jupyter-leaflet", "_model_module_version": "^0.13.5", "_model_name": "LeafletRectangleModel", "_view_count": null, "_view_module": "jupyter-leaflet", "_view_module_version": "^0.13.5", "_view_name": "LeafletRectangleView", "base": false, "bottom": false, "bounds": [[44.7541333, -63.176820000000006], [43.5541333, -65.17682]], "color": "#2e4053", "dash_array": null, "draggable": false, "fill": true, "fill_color": "#2e4053", "fill_opacity": 0.1, "line_cap": "round", "line_join": "round", "locations": [], "name": "", "no_clip": true, "opacity": 0.5, "options": ["color", "dash_array", "draggable", "fill", "fill_color", "fill_opacity", "line_cap", "line_join", "no_clip", "opacity", "pointer_events", "smooth_factor", "stroke", "transform", "weight"], "pointer_events": "", "popup": null, "popup_max_height": null, "popup_max_width": 300, "popup_min_width": 50, "rotation": true, "scaling": true, "smooth_factor": 1.0, "stroke": true, "transform": false, "uniform_scaling": false, "weight": 3}}, "62e75f400d884b47b4984932f96bb6db": {"model_name": "LeafletAwesomeIconModel", "model_module": "jupyter-leaflet", "model_module_version": "^0.13.5", "state": {"_model_module": "jupyter-leaflet", "_model_module_version": "^0.13.5", "_model_name": "LeafletAwesomeIconModel", "_view_count": null, "_view_module": "jupyter-leaflet", "_view_module_version": "^0.13.5", "_view_name": "LeafletAwesomeIconView", "base": false, "bottom": false, "icon_color": "white", "marker_color": "darkblue", "name": "microphone", "options": [], "popup": null, "popup_max_height": null, "popup_max_width": 300, "popup_min_width": 50, "spin": false}}, "583d45b001bc4abd93e559ad7d767b5d": {"model_name": "LayoutModel", "model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "61d29035f836418fa39e7554ad09e0a6": {"model_name": "DescriptionStyleModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "DescriptionStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "StyleView", "description_width": ""}}, "3885825f67584d4b80f94393120d9841": {"model_name": "HTMLModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "1.5.0", "_view_name": "HTMLView", "description": "", "description_tooltip": null, "layout": "IPY_MODEL_583d45b001bc4abd93e559ad7d767b5d", "placeholder": "\u200b", "style": "IPY_MODEL_61d29035f836418fa39e7554ad09e0a6", "value": "<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th>Receiver.ID</th>\n      <th>Receiver</th>\n      <th>Receiver.depth</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>100928</td>\n      <td>VR2W-100928</td>\n      <td>193</td>\n    </tr>\n    <tr>\n      <td>250473</td>\n      <td>VR4-UWM-250473</td>\n      <td>183</td>\n    </tr>\n    <tr>\n      <td>128559</td>\n      <td>VR2W-128559</td>\n      <td>198</td>\n    </tr>\n    <tr>\n      <td>1188739</td>\n      <td>VMT-1188739</td>\n      <td>188</td>\n    </tr>\n  </tbody>\n</table>"}}, "47b715bda2a84527a465861c84bb758a": {"model_name": "LeafletMarkerModel", "model_module": "jupyter-leaflet", "model_module_version": "^0.13.5", "state": {"_model_module": "jupyter-leaflet", "_model_module_version": "^0.13.5", "_model_name": "LeafletMarkerModel", "_view_count": null, "_view_module": "jupyter-leaflet", "_view_module_version": "^0.13.5", "_view_name": "LeafletMarkerView", "alt": "", "base": false, "bottom": false, "draggable": false, "icon": "IPY_MODEL_62e75f400d884b47b4984932f96bb6db", "keyboard": true, "location": [44.5541333, -64.17682], "name": "", "opacity": 1.0, "options": ["alt", "draggable", "keyboard", "rise_offset", "rise_on_hover", "rotation_angle", "rotation_origin", "title", "z_index_offset"], "popup": "IPY_MODEL_3885825f67584d4b80f94393120d9841", "popup_max_height": null, "popup_max_width": 300, "popup_min_width": 50, "rise_offset": 250, "rise_on_hover": false, "rotation_angle": 0.0, "rotation_origin": "", "title": "", "visible": true, "z_index_offset": 0}}, "c280d0759a7442e29ba0553337196c4d": {"model_name": "LeafletMarkerClusterModel", "model_module": "jupyter-leaflet", "model_module_version": "^0.13.5", "state": {"_model_module": "jupyter-leaflet", "_model_module_version": "^0.13.5", "_model_name": "LeafletMarkerClusterModel", "_view_count": null, "_view_module": "jupyter-leaflet", "_view_module_version": "^0.13.5", "_view_name": "LeafletMarkerClusterView", "base": false, "bottom": false, "markers": ["IPY_MODEL_47b715bda2a84527a465861c84bb758a"], "name": "", "options": [], "popup": null, "popup_max_height": null, "popup_max_width": 300, "popup_min_width": 50}}, "09ceef0551194c4fa653cd4b09d96f82": {"model_name": "LeafletMarkerClusterModel", "model_module": "jupyter-leaflet", "model_module_version": "^0.13.5", "state": {"_model_module": "jupyter-leaflet", "_model_module_version": "^0.13.5", "_model_name": "LeafletMarkerClusterModel", "_view_count": null, "_view_module": "jupyter-leaflet", "_view_module_version": "^0.13.5", "_view_name": "LeafletMarkerClusterView", "base": false, "bottom": false, "markers": [], "name": "", "options": [], "popup": null, "popup_max_height": null, "popup_max_width": 300, "popup_min_width": 50}}}, "version_major": 2, "version_minor": 0}
</script></div>
</div>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, SFU.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>